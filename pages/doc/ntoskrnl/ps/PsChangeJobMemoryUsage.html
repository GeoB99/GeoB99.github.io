<!-- Filename: PsChangeJobMemoryUsage.html -->
<!-- Purpose: Documentation of the PsChangeJobMemoryUsage function -->
<!-- Created by George Bișoc (GeoB99) -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html lang = "en">
   <head>
      <meta http-equiv = "Content-Type" content = "text/html; charset = UTF-8">
      <title>PsChangeJobMemoryUsage (Job)</title>
      <link href = "../../../../StyleSheet.css" rel = "StyleSheet" type = "text/css">
      <link rel = "icon" href = "../../../../images/ROS.png">
   </head>

   <body>
      <img src = "../../../../images/ROS.png" alt = "ReactOS Icon" align = "left" height = "125" width = "120" hspace = "10">
      <h1>&nbsp;ReactOS Tutorials (Documentation)</h1>
      <h2>&nbsp;PsChangeJobMemoryUsage function</h2>
      <h4>&nbsp;<a href = "job.html"><< Go Back</a></h4>
      <h4>&nbsp;<a href = "../../../../index.html"><< Home Page</a></h4>

      <!-- Add a separator -->
      <hr id = "thick">
      <br>

      <!-- PsChangeJobMemoryUsage -->
      <h1>&nbsp;&#129154; PsChangeJobMemoryUsage</h1>
      <h3>&nbsp;&nbsp;&nbsp;<u>Description</u></h3>
      <p>
         This function changes the memory usage of a specific process Executive job.
      </p>

      <h3>&nbsp;&nbsp;&nbsp;<u>Internals & Parameters</u></h3>
      <pre id = "prototype">
BOOLEAN
NTAPI
PsChangeJobMemoryUsage(
   IN ULONG Constant,
   IN SSIZE_T UsageAmount)
      </pre>

      <p>
         <b>Constant</b> is a parameter that must be set with a constant value of 10 (0x00000010) with the behaviour of this constant being discovered in Windows Server 2003. 
         Currently it's yet to be understood what is the purpose of this parameter and what is it needed for. <b>UsageAmount</b> indicates the size difference, the necessary 
         amount for the new memory usage to be changed for the job. The last parameter takes a signed integer value to describe the size. 
         It's worth noting the parameter can take a negative integer which is also left to be understood the reasoning behind this.
      </p>

      <p>
         This function is called from various places of the NT kernel, notably from <code>MiRemoveVadCharges</code> and <code>NtAllocateVirtualMemory</code>. It returns <b>TRUE</b>
         when the function completed successfully at changing the memory usage of a job, <b>FALSE</b> otherwise. The called functions in this routine are:
      </p>
      <pre>
         - KiAcquireGuardedMutex
         - IoSetIoCompletion
         - KeSignalGateBoostPriority
         - KiCheckForKernelApcDelivery
      </pre>
   </body>
</html>
